<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>AR Debug - Simple Test</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar-nft.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #log {
      position: fixed;
      top: 10px;
      left: 10px;
      right: 10px;
      background: rgba(0,0,0,0.9);
      color: lime;
      padding: 15px;
      font-family: monospace;
      font-size: 14px;
      z-index: 9999;
      max-height: 300px;
      overflow-y: auto;
      border: 3px solid lime;
    }
  </style>
</head>
<body>
  <div id="log">Starting...</div>

  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
    
    <!-- JUNGLE MARKER - RED BOX -->
    <a-nft
      type="nft"
      url="markers/jungle"
      id="jungle-marker"
      smooth="true"
      smoothCount="10"
      smoothTolerance="0.01"
      smoothThreshold="5">
      
      <!-- MASSIVE RED BOX - 5x bigger -->
      <a-box 
        position="0 50 0" 
        material="color: #ff0000;" 
        scale="10 10 10"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 4000">
      </a-box>
      
      <!-- BIG TEXT -->
      <a-text
        value="Oh no... I'm hungry!"
        align="center"
        color="yellow"
        position="0 65 0"
        scale="25 25 25">
      </a-text>
    </a-nft>

    <!-- DESK MARKER - GREEN SPHERE -->
    <a-nft
      type="nft"
      url="markers/desk"
      id="desk-marker"
      smooth="true"
      smoothCount="10"
      smoothTolerance="0.01"
      smoothThreshold="5">
      
      <!-- MASSIVE GREEN SPHERE - 5x bigger -->
      <a-sphere 
        position="0 50 0" 
        material="color: #00ff00;" 
        radius="5"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 5000">
      </a-sphere>
      
      <!-- BIG TEXT -->
      <a-text
        value="Wow, this melon looks amazing!"
        align="center"
        color="white"
        position="0 65 0"
        scale="25 25 25">
      </a-text>
    </a-nft>

    <!-- PICNIC MARKER - BLUE CYLINDER -->
    <a-nft
      type="nft"
      url="markers/picnic"
      id="picnic-marker"
      smooth="true"
      smoothCount="10"
      smoothTolerance="0.01"
      smoothThreshold="5">
      
      <!-- MASSIVE BLUE CYLINDER - 5x bigger -->
      <a-cylinder 
        position="0 50 0" 
        material="color: #0088ff;" 
        height="10"
        radius="4"
        animation="property: position; dir: alternate; dur: 600; loop: true; to: 0 55 0; from: 0 50 0; easing: easeInOutQuad">
      </a-cylinder>
      
      <!-- BIG TEXT -->
      <a-text
        value="Thank you, now I'm happy!"
        align="center"
        color="cyan"
        position="0 70 0"
        scale="25 25 25">
      </a-text>
    </a-nft>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const logDiv = document.getElementById('log');
    let logs = [];
    
    function log(msg) {
      console.log(msg);
      const time = new Date().toLocaleTimeString();
      logs.push(`[${time}] ${msg}`);
      if (logs.length > 20) logs.shift();
      logDiv.innerHTML = logs.join('<br>');
    }

    log('1. Page loaded');

    // Wait for scene to load
    const scene = document.querySelector('a-scene');
    if (scene.hasLoaded) {
      log('2. Scene already loaded');
    } else {
      scene.addEventListener('loaded', () => {
        log('2. Scene loaded');
      });
    }

    // Camera video loaded
    scene.addEventListener('arjs-video-loaded', () => {
      log('3. Camera video started âœ“');
    });

    // Rendering started
    scene.addEventListener('renderstart', () => {
      log('4. Rendering started');
    });

    // Get all markers
    setTimeout(() => {
      // JUNGLE
      const jungleMarker = document.getElementById('jungle-marker');
      if (jungleMarker) {
        log('5. Jungle marker ready');
        jungleMarker.addEventListener('markerFound', () => {
          log('ðŸŸ¥ JUNGLE FOUND! Red box');
          logDiv.style.borderColor = 'red';
        });
        jungleMarker.addEventListener('markerLost', () => {
          log('Jungle lost');
          logDiv.style.borderColor = 'lime';
        });
      }

      // DESK
      const deskMarker = document.getElementById('desk-marker');
      if (deskMarker) {
        log('6. Desk marker ready');
        deskMarker.addEventListener('markerFound', () => {
          log('ðŸŸ© DESK FOUND! Green sphere');
          logDiv.style.borderColor = 'green';
        });
        deskMarker.addEventListener('markerLost', () => {
          log('Desk lost');
          logDiv.style.borderColor = 'lime';
        });
      }

      // PICNIC
      const picnicMarker = document.getElementById('picnic-marker');
      if (picnicMarker) {
        log('7. Picnic marker ready');
        picnicMarker.addEventListener('markerFound', () => {
          log('ðŸŸ¦ PICNIC FOUND! Blue cylinder');
          logDiv.style.borderColor = 'blue';
        });
        picnicMarker.addEventListener('markerLost', () => {
          log('Picnic lost');
          logDiv.style.borderColor = 'lime';
        });
      }
    }, 2000);

    // Log any errors
    window.addEventListener('error', (e) => {
      log('âŒ ERROR: ' + e.message);
    });

    // Status check every 5 seconds
    setInterval(() => {
      log('Status: Camera running, waiting for marker...');
    }, 5000);
  </script>
</body>
</html>
